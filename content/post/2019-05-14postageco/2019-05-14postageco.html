

<div id="overview" class="section level1">
<h1>Overview</h1>
<p>Skipper Seabold, a well known contributor to the PyData community, recently gave a <a href="https://youtu.be/kTo16ieMCi8">talk</a> titled “What’s the Science in Data Science?”. His talk presents several methods commonly used in econometrics that could benefit the field of data science if more widely adopted. Some of the methods were:</p>
<ul>
<li>Instrumental Variables</li>
<li>Matching</li>
<li>Difference-in-Differences</li>
</ul>
<p>From what I gather, these modeling techniques are popular for discovering causal relationships in observational studies. When an RCT (randomized control trial) is unreasonable then these techniques give us an alternative approach.</p>
<p>I’ll be exploring one of these methods called <em>Instrumental Variables</em> (or IV). An example use case from Skipper’s talk was a <a href="https://www.aeaweb.org/articles?id=10.1257/jep.20.2.207">study</a> on the <strong>Fulton Fish Market</strong> in NYC.</p>
<p><img src="/post/2019-03-26-market-price-with-instrumental-variables_files/fulton.jpg" alt="drawing" width="50%"/></p>
<p>The referenced study estimates the demand curve for fish at the market. Finding the demand curve is unfortunately not as simple as regressing quantity on price. The relationship between price and the quantity of fish sold is not exclusive to demand but includes supply effects at the market. We’ll be using IV to account for supply effects to isolate the demand effects.</p>
<p>In this blog post I’ll be reproducing a portion of this analysis using R, packages of the <a href="https://www.tidyverse.org/">tidyverse</a>, and the <a href="https://github.com/paul-buerkner/brms">brms</a> package in R.</p>
<div id="data" class="section level2">
<h2>Data</h2>
<p>I discovered data related to this study at the following website:
<a href="http://people.brandeis.edu/~kgraddy/data.html" class="uri">http://people.brandeis.edu/~kgraddy/data.html</a></p>
<p>Bringing this data into R is very simple. The linked dataset appears to be the cleaned and transformed data used within the paper. Let’s read it into our R environment and take a look:</p>
<pre class="r"><code>library(tidyverse)
fulton &lt;- read_tsv(&quot;http://people.brandeis.edu/~kgraddy/datasets/fish.out&quot;)
fulton</code></pre>
<pre><code>## # A tibble: 111 x 16
##     day1  day2  day3  day4   date stormy mixed   price   qty rainy  cold
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1     1     0     0     0 911202      1     0 -0.431   8.99     1     0
##  2     0     1     0     0 911203      1     0  0       7.71     0     0
##  3     0     0     1     0 911204      0     1  0.0723  8.35     1     1
##  4     0     0     0     1 911205      1     0  0.247   8.66     0     1
##  5     0     0     0     0 911206      1     0  0.664   7.84     0     1
##  6     1     0     0     0 911209      0     0 -0.207   9.30     0     0
##  7     0     1     0     0 911210      0     1 -0.116   8.92     0     0
##  8     0     0     1     0 911211      0     0 -0.260   9.11     1     0
##  9     0     0     0     1 911212      0     1 -0.117   8.31     0     0
## 10     0     0     0     0 911213      0     0 -0.342   9.21     0     0
## # ... with 101 more rows, and 5 more variables: windspd &lt;dbl&gt;,
## #   windspd2 &lt;dbl&gt;, pricelevel &lt;dbl&gt;, totr &lt;dbl&gt;, tots &lt;dbl&gt;</code></pre>
<p>Here is a quick description of the variables we will be using for this work:</p>
<table>
<thead>
<tr class="header">
<th>Variable</th>
<th>Units</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>qty</td>
<td>log(pounds)</td>
<td>The total amount of fish sold on a day</td>
</tr>
<tr class="even">
<td>price</td>
<td>log($/lb)</td>
<td>Average price for the day</td>
</tr>
<tr class="odd">
<td>day1-day4</td>
<td>dummy var</td>
<td>Monday-Thurs</td>
</tr>
<tr class="even">
<td>cold</td>
<td>dummy var</td>
<td>Weather on shore</td>
</tr>
<tr class="odd">
<td>rainy</td>
<td>dummy var</td>
<td>Rain on shore</td>
</tr>
<tr class="even">
<td>stormy</td>
<td>dummy var</td>
<td>Wind and waves off shore (a 3-day moving average)</td>
</tr>
</tbody>
</table>
<p>The paper informs the reader that transactions recorded are of a particular fish species called Whiting. We can get a feel for the total amount of Whiting being sold by reproducing Figure <code>2</code> from the paper.</p>
<pre class="r"><code># fixing the date column 
fulton %&gt;% 
  mutate(
    date = as.character(date),
    date = parse_date(date, format = &quot;%y%m%d&quot;)
  ) %&gt;% 
  ggplot(aes(x = date, y = exp(qty))) +
    geom_col() +
    labs(
      title = &quot;Figure 2&quot;,
      subtitle = &quot;Daily Volumes of Whiting&quot;,
      x = &quot;Date (December 2, 1991-May 8, 1992)&quot;,
      y = &quot;Quantity (pounds)&quot;
      )</code></pre>
<p><img src="2019-05-14postageco_files/figure-html/unnamed-chunk-2-1.svg" width="672" /></p>
</div>
</div>
